<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Trang Sinh Viên</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="app-layout">
  <!-- Top bar for mobile: hamburger button -->
  <header class="topbar" aria-label="Thanh điều hướng di động">
    <button id="hamburger-btn" class="hamburger" type="button" aria-label="Mở menu" aria-controls="app-menu" aria-expanded="false">☰</button>
  </header>
  <nav class="menu">
    <button class="menu-item" id="menu-profile">Thông tin cá nhân</button>
    <button class="menu-item" id="menu-search">Tìm phòng trọ</button>
  <button class="menu-item" id="menu-rented">Xem trọ đã thuê</button>
  <button class="menu-item" id="menu-feedback">Phản hồi ADMIN</button>
  <button class="menu-item" id="menu-noti">Thông báo</button>
    <button class="menu-item" id="menu-logout" type="button">Đăng xuất</button>
  </nav>

  <main class="content">
    <h2 class="page-title">Trang Sinh Viên</h2>
    <!-- (Moved admin contact to page footer per request) -->

    <!-- Panel tìm kiếm phòng trọ -->
    <section id="panel-search" class="panel" style="display:none">
      <!-- đổi flex -> grid, ép kích thước input/button -->
      <form id="frm-search" style="display:grid;grid-template-columns:1fr auto;gap:10px">
        <input id="q-address" type="search" placeholder="Nhập địa chỉ, phường/xã, quận/huyện, thành phố"
               style="min-width:0;width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:8px" />
        <button type="submit" style="padding:8px 16px;white-space:nowrap">TÌM</button>
      </form>

  <h4 style="margin-top:10px">Chủ trọ phù hợp</h4>
  <div id="search-results" class="cards-grid"></div>
  <h4 style="margin-top:16px">Phòng của chủ trọ</h4>
  <div id="landlord-rooms"></div>
    </section>

    <section id="panel-profile" class="panel" style="display:none">
      <form id="frm-profile">
        <div class="form-group">
          <label>Gmail</label>
          <input type="email" id="email" readonly>
        </div>
        <div class="form-group">
          <label>Họ tên</label>
          <input type="text" id="hoTen" maxlength="100">
        </div>
        <div class="form-group">
          <label>Số điện thoại</label>
          <input type="tel" id="soDienThoai" maxlength="20">
        </div>
        <div class="form-group">
          <label>Trường</label>
          <input type="text" id="truong" maxlength="100">
        </div>

        <button type="submit">Lưu thông tin</button>
        <div class="switch"><a href="/sinhvien">Quay lại trang chính</a></div>
      </form>
    </section>

    <!-- Panel trọ đã thuê -->
    <section id="panel-rented" class="panel" style="display:none">
      <h3>Trọ bạn đang thuê</h3>
      <div id="rented-list"></div>
    </section>

    <!-- NEW: Phản hồi ADMIN -->
    <section id="panel-feedback" class="panel" style="display:none">
      <h3>Gửi phản hồi tới Admin</h3>
      <form id="frm-feedback" style="display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end">
        <div class="form-group">
          <label>Loại</label>
          <select id="fb-type" required>
            <option value="gopy">Góp ý</option>
            <option value="suco">Sự cố</option>
            <option value="khieunai">Khiếu nại</option>
            <option value="tocao">Tố cáo</option>
          </select>
        </div>
        <div class="form-group" style="min-width:260px;flex:1">
          <label>Tiêu đề</label>
          <input type="text" id="fb-title" maxlength="200" required placeholder="Nhập tiêu đề">
        </div>
        <div class="form-group" style="width:100%">
          <label>Nội dung</label>
          <textarea id="fb-content" rows="4" maxlength="1000" required placeholder="Mô tả chi tiết"></textarea>
        </div>
        <button type="submit">Gửi phản hồi</button>
      </form>
    </section>

    <!-- NEW: Thông báo của tôi (Sinh viên) -->
    <section id="panel-noti" class="panel" style="display:none">
      <h3>Thông báo</h3>
      <div class="form-row" style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap">
        <div class="form-group">
          <label>Loại</label>
          <select id="noti-type">
            <option value="all" selected>Tất cả</option>
            <option value="Ban">Bị khóa</option>
            <option value="Unban">Mở khóa</option>
            <option value="YeuCauThue">Yêu cầu thuê</option>
            <option value="Thue">Đã thuê</option>
            <option value="XacThuc">Xác thực</option>
          </select>
        </div>
        <label class="form-group" style="display:flex;gap:6px;align-items:center;margin:0">
          <input type="checkbox" id="noti-unread"> Chỉ hiện chưa đọc
        </label>
  <button type="button" id="noti-refresh" class="btn btn-sm">Tải lại</button>
      </div>

      <table id="noti-table" class="table table-compact table-striped">
        <colgroup>
          <col style="width:88px">
          <col style="width:160px">
          <col style="width:260px">
          <col>
          <col style="width:120px">
        </colgroup>
        <thead>
          <tr><th>ID</th><th>Loại</th><th>Tiêu đề</th><th>Nội dung</th><th>Thao tác</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    
    <!-- Footer admin contact (bottom inside main content) -->
    <footer class="support-footer" id="support-footer">
      <strong>Hỗ trợ:</strong>
      <span id="sf-name">Quản trị viên</span>
      <span class="dot">•</span>
      <a id="sf-phone" href="#">SĐT</a>
      <span class="dot">•</span>
      <a id="sf-zalo" href="#" target="_blank" rel="noopener">Zalo</a>
      <span class="dot">•</span>
      <a id="sf-fb" href="#" target="_blank" rel="noopener">Facebook</a>
    </footer>
  </main>

  <!-- Overlay for drawer -->
  <div id="drawer-overlay" class="drawer-overlay" hidden></div>

  <div id="hop-thong-bao-nen" style="display:none">
    <div id="hop-thong-bao">
      <div id="hop-thong-bao-noi-dung"></div>
      <!-- NEW: prevent accidental form submit -->
      <button id="hop-thong-bao-dong" type="button">Đóng</button>
    </div>
  </div>

  <!-- Load JS from file instead of inline -->
  <script src="/sinhvien.js" defer></script>
</body>
</html>